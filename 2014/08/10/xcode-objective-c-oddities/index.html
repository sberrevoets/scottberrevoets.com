<!DOCTYPE html>
<html lang="en">
<head>
          <title>Xcode & Objective-C Oddities - Scott Berrevoets</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/png" href="https://scottberrevoets.com/theme/images/favicon.png">
        <link rel="apple-touch-icon" type="image/png" sizes="any" href="https://scottberrevoets.com/theme/images/favicon.png">
        <link href="https://scottberrevoets.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Scott Berrevoets Full Atom Feed" />
        <link href="https://scottberrevoets.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Scott Berrevoets Full RSS Feed" />
        <link href="https://scottberrevoets.com/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Scott Berrevoets Atom Feed" />
        <link href="https://scottberrevoets.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Scott Berrevoets RSS Feed" />

    <meta name="description" content="Some fun things about working with Xcode and Objective-C" />


        <link rel="stylesheet" type="text/css" href="https://scottberrevoets.com/theme/css/style.css" />
</head>

<body id="index" class="home">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="github" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </symbol>
  <symbol id="mastodon" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M18.648 15.254c-1.816 1.763 -6.648 1.626 -6.648 1.626a18.262 18.262 0 0 1 -3.288 -.256c1.127 1.985 4.12 2.81 8.982 2.475c-1.945 2.013 -13.598 5.257 -13.668 -7.636l-.026 -1.154c0 -3.036 .023 -4.115 1.352 -5.633c1.671 -1.91 6.648 -1.666 6.648 -1.666s4.977 -.243 6.648 1.667c1.329 1.518 1.352 2.597 1.352 5.633s-.456 4.074 -1.352 4.944z" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M12 11.204v-2.926c0 -1.258 -.895 -2.278 -2 -2.278s-2 1.02 -2 2.278v4.722m4 -4.722c0 -1.258 .895 -2.278 2 -2.278s2 1.02 2 2.278v4.722" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </symbol>
  <symbol id="mail" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M3 7l9 6l9 -6" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </symbol>
  <symbol id="rss" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M4 4a16 16 0 0 1 16 16" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M4 11a9 9 0 0 1 9 9" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </symbol>
  <symbol id="linkedin" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M8 11l0 5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M8 8l0 .01" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M12 16l0 -5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M16 16v-3a2 2 0 0 0 -4 0" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </symbol>
</svg>        <header id="banner" class="body">
            <div class="header-top">
                <h1><a href="https://scottberrevoets.com/">Scott Berrevoets</a></h1>

                <ul id="social">
                    <li><a href="https://github.com/sberrevoets">
                        <svg class="icon"><use href="#github" /></svg>
                    </a></li>
                    <li><a href="https://linkedin.com/in/sberrevoets">
                        <svg class="icon"><use href="#linkedin" /></svg>
                    </a></li>
                    <li><a href="https://hachyderm.io/@ScottBerrevoets">
                        <svg class="icon"><use href="#mastodon" /></svg>
                    </a></li>
                    <li><a href="mailto:hi@scottberrevoets.com">
                        <svg class="icon"><use href="#mail" /></svg>
                    </a></li>
                    <li><a href="/feeds/all.atom.xml">
                        <svg class="icon"><use href="#rss" /></svg>
                    </a></li>
                </ul>
            </div>

            <nav id="menu"><ul>
                <li><a href="https://scottberrevoets.com/">About</a></li>
                <li><a href="https://scottberrevoets.com/blog.html">Blog</a></li>
            </ul></nav><!-- /#menu -->
        </header><!-- /#banner -->
<section id="content" class="body">
  <header>
      <h2 class="article-title">Xcode & Objective-C Oddities</h2>
 
    <time class="published subheader" datetime="2014-08-10T00:00:00-07:00">
      August 10, 2014
    </time>
        <span class="subheader">&bullet; 5 min read</span>
  </header>
  <div class="article-content">
    <p>Any developer that has worked with Xcode to write a little more than just "Hello, World" knows that Xcode and Objective-C have their quirks. Chances are you have heard of <a href="https://twitter.com/TextFromXcode">@TextFromXcode</a>, the Twitter handle that portrays Xcode as a high school bully in fake text conversations like this:</p>
<p><img alt="Xcode Bully" src="https://cl.ly/image/0I2P191S0Q2k/20140227.PNG"></p>
<p>But it's not always Xcode that makes Apple platform developers sometimes frown and sigh. Sometimes it's the developers themselves, sometimes it's the documentation, and sometimes a hidden gem from within Apple frameworks makes an appearance. I've compiled a short list of things I've encountered. Because it's Sunday and I didn't have anything better to do.</p>
<h2 id="uigobblergesturerecognizer"><code>UIGobblerGestureRecognizer</code></h2>
<p>Say what? A "<a href="https://github.com/nst/iOS-Runtime-Headers/blob/master/Frameworks/UIKit.framework/UIGobblerGestureRecognizer.h"><code>gobbler</code></a>" recognizer? Does it recognize when the user imitates a turkey? Well, maybe, but according to <a href="https://twitter.com/ortwingentz/status/225508227234791424">BJ Homer</a>, it is used to avoid recognition of a gesture while animations are in progress. Ah of course! Now the name "gobbler" makes perfect sense! ðŸ˜¶</p>
<h2 id="uitapandahalfrecognizer"><code>UITapAndAHalfRecognizer</code></h2>
<p>Speaking of gesture recognizers, there's another remarkable one that lives in the private section of UIKit: <code>UITapAndAHalfRecognizer</code>. This is a private subclass of <code>UIGestureRecognizer</code> that records "a tap and a half".</p>
<p>So what does that mean? Does it detect whether the user goes in for a second tap, but never actually touches the screen? Or does the user touch the screen ever so slightly that the second tap can hardly be considered a complete tap? Nope! This recognizer fires when a second tap stays on the screen. Not sure for what functionality Apple needs this, but it's been around since at least iOS 4, so it probably has a purpose.</p>
<h2 id="naming-is-hard">Naming is hard</h2>
<blockquote>
<p>There are only two hard things in Computer Science: cache invalidation and naming things.<br>
- Phil Karlton</p>
</blockquote>
<p>Naming <strong>is</strong> hard, but Objective-C developers always say that verbosity is one of Objective-C's strengths because its naming conventions are self-documenting. Normally I'd agree, but in this case, I think Apple may want to consider a different name.</p>
<p><a href="https://developer.apple.com/library/prerelease/ios/releasenotes/General/iOS80APIDiffs/frameworks/HomeKit.html"><code>HMCharacteristicValueLockMechanismLastKnownActionUnsecuredUsingPhysicalMovementExterior</code></a> is a brand new constant in iOS 8 and has got to be one of the longest constants that's available in iOS. Try saying it without taking a breath in the middle. </p>
<p>I found it in the iOS 8 API diffs, but it did make me wonder. What is the longest Objective-C method available in Cocoa Touch? Well, a quick Google search led to a blog post by <a href="https://initwithstyle.net/2013/10/in-search-of-the-longest-method">Stuart Sharpe</a>, who used the Objective-C runtime to generate a list of methods in the iOS 7 SDK.</p>
<p>Turns out, the longest method in the iOS 7 SDK is</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">+</span><span class="p">[</span><span class="n">CUIShapeEffectStack</span><span class="w"> </span><span class="n">shapeEffectSingleBlurFrom</span><span class="o">:</span>
<span class="w">                               </span><span class="nl">withInteriorFill</span><span class="p">:</span>
<span class="w">                                         </span><span class="nl">offset</span><span class="p">:</span>
<span class="w">                                       </span><span class="nl">blurSize</span><span class="p">:</span>
<span class="w">                                   </span><span class="nl">innerGlowRed</span><span class="p">:</span>
<span class="w">                                 </span><span class="nl">innerGlowGreen</span><span class="p">:</span>
<span class="w">                                  </span><span class="nl">innerGlowBlue</span><span class="p">:</span>
<span class="w">                               </span><span class="nl">innerGlowOpacity</span><span class="p">:</span>
<span class="w">                                 </span><span class="nl">innerShadowRed</span><span class="p">:</span>
<span class="w">                               </span><span class="nl">innerShadowGreen</span><span class="p">:</span>
<span class="w">                                </span><span class="nl">innerShadowBlue</span><span class="p">:</span>
<span class="w">                             </span><span class="nl">innerShadowOpacity</span><span class="p">:</span>
<span class="w">                                   </span><span class="nl">outerGlowRed</span><span class="p">:</span>
<span class="w">                                 </span><span class="nl">outerGlowGreen</span><span class="p">:</span>
<span class="w">                                  </span><span class="nl">outerGlowBlue</span><span class="p">:</span>
<span class="w">                               </span><span class="nl">outerGlowOpacity</span><span class="p">:</span>
<span class="w">                                 </span><span class="nl">outerShadowRed</span><span class="p">:</span>
<span class="w">                               </span><span class="nl">outerShadowGreen</span><span class="p">:</span>
<span class="w">                                </span><span class="nl">outerShadowBlue</span><span class="p">:</span>
<span class="w">                             </span><span class="nl">outerShadowOpacity</span><span class="p">:</span>
<span class="w">                            </span><span class="nl">hasInsideShadowBlur</span><span class="p">:</span>
<span class="w">                           </span><span class="nl">hasOutsideShadowBlur</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>

<p>Unless iOS 8 introduces a longer method name, this one takes the cake with 22 arguments and 352 characters. If you have Xcode configured to line-break at 80 characters (yes, some people still do that), this method signature alone, without any arguments, takes up 5 lines.</p>
<p>Another beauty of a method lives in Core Animation and its method signature is </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="bp">CAMediaTimingFunction</span><span class="w"> </span><span class="n">functionWithControlPoints</span><span class="o">::::</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>

<p><code>::::</code>? Is that even valid syntax? Yes, and you call the method like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">[</span><span class="bp">CAMediaTimingFunction</span><span class="w"> </span><span class="n">functionWithControlPoints</span><span class="o">:</span><span class="mf">0.25</span><span class="w"> </span><span class="o">:</span><span class="mf">.50</span><span class="w"> </span><span class="o">:</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="mf">1.0</span><span class="p">];</span>
</code></pre></div></td></tr></table></div>

<p>Was an array really too much to ask...?</p>
<h2 id="nsdate-nildate"><code>[NSDate nilDate]</code></h2>
<p>This one has made the rounds throughout the developer community before, but I'm adding it here in case you haven't seen it yet. Try running the following code:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="bp">NSCalendar</span><span class="w"> </span><span class="o">*</span><span class="n">calendar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSCalendar</span><span class="w"> </span><span class="n">currentCalendar</span><span class="p">];</span>
<span class="p">[</span><span class="n">calendar</span><span class="w"> </span><span class="n">components</span><span class="o">:</span><span class="n">NSCalendarUnitYear</span><span class="w"> </span><span class="n">fromDate</span><span class="o">:</span><span class="nb">nil</span><span class="w"> </span><span class="n">toDate</span><span class="o">:</span><span class="p">[</span><span class="bp">NSDate</span><span class="w"> </span><span class="n">date</span><span class="p">]</span><span class="w"> </span><span class="n">options</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>
</code></pre></div></td></tr></table></div>

<p>In the console log, you'll find the following output:</p>
<blockquote>
<p>*** -[__NSCFCalendar components:fromDate:toDate:options:]: fromDate cannot be nil<br>
I mean really, what do you think that operation is supposed to mean with a nil fromDate?<br>
An exception has been avoided for now.<br>
A few of these errors are going to be reported with this complaint, then further violations will simply silently do whatever random thing results from the nil.</p>
</blockquote>
<p>Either a grumpy Apple developer woke up at the wrong side of the bed or has a great sense of humor. In any case, I wouldn't mind if more sarcastic warnings started popping up in Xcode's console.</p>
<h2 id="defying-the-uncertainty-principle-in-ios">Defying the Uncertainty Principle in iOS</h2>
<blockquote>
<p>[I]n 1927, Werner Heisenberg stated that the more precisely the position of some particle is determined, the less precisely its momentum can be known, and vice versa.<br>
<a href="https://en.wikipedia.org/wiki/Uncertainty_principle">Wikipedia</a></p>
</blockquote>
<p>If that's true, and it's fairly safe to assume that it is, I'd avoid using <code>-[CLLocation speed]</code> for apps like radar detectors. I wonder if we're ever going to get a <code>-[CLSpeed location]</code> method, which has a more accurate speed and a less accurate location.</p>
<h2 id="xcode-at-it-again">Xcode at it again</h2>
<p>Lastly, the following is a screenshot I personally took at work that completely baffled me.</p>
<p><img src="/images/XcodeScreenshot.png" style="width: 700px; margin: 0 auto; display: block;"></p>
<p>This would not go away, even after cleaning the build folder and rebuilding. In the end I resolved the problem by running</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>stash
$<span class="w"> </span>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD
</code></pre></div></td></tr></table></div>

<p>Then, after a clean build and <code>git stash pop</code> the errors finally went away...</p>
<p>That's just a few things I've found while working with Xcode and Objective-C over the years. If you have more, please share!</p>
  </div><!-- /.entry-content -->
</section>

  <script data-goatcounter="https://sberrevoets.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
</body>
</html>